/* ========== Smooth Caret Styles ========== */

/* CSS Variables for customization */
:root {
    --smooth-caret-color: var(--primary, #2563eb);
    --smooth-caret-glow: rgba(37, 99, 235, 0.4);
    --smooth-caret-width: 2.5px;
    --smooth-caret-blink-duration: 1.1s;
}

/* Dark mode caret color */
.app-container.dark {
    --smooth-caret-color: #60a5fa;
    --smooth-caret-glow: rgba(96, 165, 250, 0.5);
}

/* Hide native caret when smooth caret is enabled */
.smooth-caret-enabled {
    caret-color: transparent !important;
}

/* Smooth caret element - Premium design */
.smooth-caret {
    position: absolute;
    pointer-events: none;
    z-index: 1000;
    border-radius: 2px;
    will-change: top, left, height, opacity;
    /* Subtle glow effect */
    box-shadow: 0 0 8px var(--smooth-caret-glow),
        0 0 2px var(--smooth-caret-glow);
}

/* Blink animation - Smoother fade */
@keyframes smoothCaretBlink {

    0%,
    100% {
        opacity: 1;
    }

    40% {
        opacity: 1;
    }

    50% {
        opacity: 0.2;
    }

    60% {
        opacity: 1;
    }
}

.smooth-caret-blink {
    animation: smoothCaretBlink var(--smooth-caret-blink-duration) ease-in-out infinite;
}

/* Pulse effect on focus */
@keyframes caretPulse {
    0% {
        box-shadow: 0 0 8px var(--smooth-caret-glow),
            0 0 2px var(--smooth-caret-glow);
    }

    50% {
        box-shadow: 0 0 12px var(--smooth-caret-glow),
            0 0 4px var(--smooth-caret-glow);
    }

    100% {
        box-shadow: 0 0 8px var(--smooth-caret-glow),
            0 0 2px var(--smooth-caret-glow);
    }
}

/* Apply pulse when not blinking (typing) */
.smooth-caret:not(.smooth-caret-blink) {
    animation: caretPulse 0.6s ease-in-out;
}

/* Ensure BlockNote wrapper has proper positioning */
.bn-container {
    position: relative;
}

.bn-editor {
    position: relative;
}

/* Override for when editor is focused */
.ProseMirror-focused .smooth-caret {
    opacity: 1;
}